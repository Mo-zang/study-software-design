## 날짜와 시간 데이터로 효율적으로 작업하기

### 날짜와 시간 정보에 대한 개념
* 인스턴트
  * 특정한 시점 - Ex) 2025-07-07 19:00
* 에포크
  * 기준시점 (UNIX Epoch[1970-01-01 00:00:00]가 대표적) Ex) 2025-07-07 13:00
* 시간간격
  * Duration Ex) 기준시점과 인스턴스의 차이 6시간


### 상용 시간: 달력 시스템, 날짜, 시간, 날짜 간격

#### 달력 시스템: 시간을 일, 월, 년으로 분해하기
* 상용시간 - 인간의 관점에서 일, 월, 년 등 날짜와 시간에 대해 생각할때 부르는 단어?
* 달력 시스템마다 특징이 매우 다름.
  * 그레고리력과 율리우스력은 거의 동일 -> 윤년 관점에서만 차이가 있음
  * 히브리력 -> 해쉬반과 키슬레브의 길이는 매년 다름, 윤년은 한달이 더 길어짐.

##### 하루 중 시간
* java.time에서는 java.tim.LocalTime
* NodaTime에서는 NodaTime.LocalTime
* 상용 시간 내에서 산술 계산
  * 항상 시간 간격을 함께 더하거나, 인스턴트에서 시간 간격을 빼고 더함. 또는 두 인스턴트의 차이를 구함.

##### 날짜 간격(PERIODS): 상용 시간에서 산술 계산
* java.time에서 타입은 java.time.Perio
* NodaTime에서 NodaTime.Period
* 극단적인 경우에는 정답이 없을 수 있음.
* 덧셈의 결합법칙이 성립하지 않음
  * Ex)
    1. (2021-01-31 + 1Month) + 2Month
    2. 2021-01-31 + (1Month + 2Month)
    * java.time과 NodaTime 두가지 다 a.의 결과값은 2021-04-28이지만 b.의 결과값은 2021-04-30임.
* 날짜와 날짜 간격의 덧셈은 가역성이 없음
  * 1월에 더하는경우 월단위 계산의 경우 그러함.

#### 시간대, UTC, 그리고 UTC 오프셋
* java.time에서는 java.time.ZoneId, java.time.ZoneOffset
* NodaTime에서는 NodaTime.DateTimeZone, NodaTime.Offset
* 시간대의 기본정보 세가지
  * 식별자 또는 이름
  * 해당 시간대에 있다고 간주되는 지구 표면의 영역
  * 인스턴트를 상용 시간의 날짜와 시간으로 매핑하는 함수

##### 시간대가 아닌 것은 무엇일까?
* 책의 예시
  * 태평양 표준시(**PST**)와 태평양 서머타임 시간제(**PDT**)
  * **BST** 영국 서머타임 시간제와 영국 표준시
##### 시간대 정보는 어디서 가져올까?
* java.tim에서는 java.time.zone.ZoneRuleProvider
* NodaTime에서는 Time.DateTimeZoneProviders와 NodaTime.IDateTimeZoneProvider
* 각 개발언어 또는 플랫폼마다 각기 다른 접근방식을 취함.
  * java는 윈도우에서 동작할 때에도, IANA시간대를 기본으로 사용.
  * .NET은 플랫폼의 고유 시간대 사용 -> 리눅스에서는 IANA 윈도우에서는 윈도우 시간대 사용.

#### 머리가 아파지는 날짜와 시간 개념들
* 시간의 상대성
  * 컨텍스트에 따라 시간의 해석이 달라짐
    * 로그 타임스탬프 : 사용자의 지역 시간대에 따라 다르게 보여줘야 의미가 있음
    * 예약 시스템 : 클라이언트의 시간대와 서버 시간대가 다를 수 있음
  * 윤초
  * 화성의 시간??
  * 달력 시스템 전환
