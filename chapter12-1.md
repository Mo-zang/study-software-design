# 버전과 호환성 관리하기

## 추상적으로 생각해보는 버전 관리

### 버전의 속성

#### 기억 가능성
* 버전 관리 체계는 기억하기 쉽고 읽기 쉽게 설계됨.

#### 불변성
* 종종 우리가 의존(사용)하는 버전은 상당한 정확성과 불변성을 지님.
  * 깃 해시는 컨텐츠에서 파생되므로 컨텐츠가 바뀌면 해시도 반드시 바뀌며, 특정 해시값의 컨텐츠는 불변성을 띄고 있음.


#### 버전 사이의 암묵적인 관계
* 버전 관리 시스템은 작은 데이터 내에 중요한 정보를 실어 나르려 노력함.
  * 유의적 버전관리

##### 하위 호환성과 상위 호환성
* 하위 호환성
  * 새로운 버전이 이전 버전의 정보로도 동작하는 속성
  * 프로그래밍 언어의 예
    * 자바나 PHP등 많은 언어는 새로운 버전을 사용하더라도 이전 버전의 정보(메서드 등)를 대부분 그대로 사용할 수 있음.
* 상위 호환성
  * 예전 버전이 새로운 버전의 정보로도 동작하는 속성
  * 라이브러리 패치 버전의 경우 상위호환성을 제공함.

#### 유의적 버전 관리
* 유의적 버전 관리를 완벽하게 준수하면, 최소한의 규칙을 알려주는 가변성을 띈다.

##### 안정적인 버전을 위한 관리
* 유의적 버전 관리를 따르는 버전 번호는 항상 주 번호, 부 번호, 패치 번호라는 세 가지 정수부로 구성됨.
* 유의적 버전 관리의 규칙
  * 주 번호가 다를 경우 호환성이 보장되지 않음.
  * 부 번호가 다를 경우 부 번호가 큰 버전이 작은 버전에대한 하위 호환성을 유지해주어야함.
  * 주 번호와 부 번호가 일치하는 경우, 서로 상위 호환성과 하위 호환성을 유지해야함.
  * 주 버전의 변경이 있는 경우 기존 가정이 모두 백지화 되므로, 신중하게 업그레이드를 진행하고, 엄격한 테스트를 수행해야함.
  * 부 버전의 업그레이드가 있는 경우 모든 것이 정상적으로 동작해야함. (종종 그렇지 않은 경우가 있음.)
  * 번호가 동일한 부 버전에서 패치 버전들 사이에 업그레이드 또는 다운그레이드 시 모든것이 정상 동작해야함. (일반적으로 버그 Fix 업데이트가 이루어지기 때문)


##### 안정적이지 않은 버전 명시
* 유의적 버전 관리의 안정적이지 않은 버전 명시 메커니즘
  * 초기 개발을 위해 주 버전 번호를 0으로 사용하는 방식
    * 0.2.x와 0.1.x는 호환되지 않을 수 있음.
    * 호환성을 유지하기 위해 패치 수준의 버전 번호 변경을 강제할 필요성이 없음.
  * 사전 릴리즈 레이블을 사용하는 방식
    * 하이픈으로 구분되는 접미사가 붙음
      * x.x.x-a 등
      * 위의 사례와 달리 호환성 유지가 되는 경우가 많음

##### 빌드 메타 데이터
* 위에 설명된 사례 이외에 빌드 메타 데이터를 사용하여 버전 명시하는 경우도 있다.
  * 순수하게 정보를 제공할 목적으로 만들어짐

##### 버전 순서
* 유의적 버전 관리는 호환성을 결정하고 가능한 업그레이드를 제안하기 위해 버전 순서를 명시함.


#### 마케팅 버전
* 대다수 경우에는 마케팅 버전을 필요로 하지 않음.
  * 라이브러리, 프로토콜, 파일 형식, 스키마 등이 아닌, 제품을 위하여 사용됨.
  * 게임 1이 2.x.x인 버전 번호로 이루어져 있는경우 게임 2는 1.0.0 으로 되는 경우가 있음.