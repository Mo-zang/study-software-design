### 데이터 파티셔닝과 데이터 나누기
* 데이터 파티셔닝 : 데이터를 나누는 기법을 통틀어 말하는 것.
  * 데이터 비대칭이 이루어지지 않게 주의해야함.
  * 온라인 처리를 위해 데이터 접근 패턴을 읽거나 쓰는 목적으로 최적화 되어있음.
#### 오프라인 빅데이터 파티셔닝
* 데이터가 생성되는 시점에는 데이터가 제공할 수 있는 비즈니스적 가치를 인식하지 못할 수 있기 때문에 콜드 데이터(이력 데이터)를 가능한 오래 저장할 필요가 있다.
* 빅데이터 오프라인 처리를 위한 일반적인 데이터 파티션은 날짜를 기반으로 함.
  * 연단위
    * Ex : users/2022, users/2023 등
    * 읽기 및 처리에 비효율적임
  * 연, 월, 일 의 세분화단위
    * Ex : users/2022/01/01, users/2022/01/02 등
    * 연단위 방법보다 세분화 되어있어 읽기 및 처리에 효율적
#### 파티셔닝 대 샤딩
* 날짜별로 파티셔닝한 데이터를 여러 노드로 분리할 수 있음.
* 샤딩 -> 관련내용 좀더 찾아볼 필요 있음.
  * 사용자의 데이터가 파티션 날짜기준 한달의 단위로 N개로 파티셔닝 되어있고, 2020년을 위한 데이터는 물리 노드 N(12 이하의 값)개에 수평으로 분리됨. -> 이때 물리 샤드의 최대 수 : 12
    * 범위 파티셔닝 방식
#### 파티셔닝 알고리즘
* 주어진 식별자 (user_id)를 위해 저장된 모든 이벤트를 가져오고 싶다고 한다면, 범위 파티셔닝은 적절치 못함.
* 해시 파티셔닝 알고리즘
  * 데이터를 특정 키의 해시값을 기준으로 나누는 파티셔닝 방식
    * 데이터의 키(user_id)에 해시 함수 적용
    * `hash(user_id) % N` N(노드의 갯수)
    * 장점
      * 데이터를 고르게 분산시킬 수 있음
      * 파티션 선택이 계산 한번으로 끝남
    * 단점
      * 스케일링이 어려움 : 파티션 수가 바뀌면 대부분의 데이터를 재 배치해야함.
      * 해결을 위해 Consistent Hasing(일관성 있는 해싱 알고리즘) 방식이 사용되기도 함.
